/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var p=window.Shiny?Shiny.InputBinding:class{};function b(a,e){window.Shiny&&Shiny.inputBindings.register(new a,"bslib."+e)}function g(a){if($(a).data("window-resize-observer"))return;let e=new Event("resize"),t=new ResizeObserver(()=>{window.dispatchEvent(e)});t.observe(a),$(a).data("window-resize-observer",t)}var i=class{constructor(e){if(i.instanceMap.set(e,this),this.layout={container:e,main:e.querySelector(":scope > .main"),sidebar:e.querySelector(":scope > .sidebar"),toggle:e.querySelector(":scope > .collapse-toggle")},!this.layout.toggle)throw new Error("Tried to initialize a non-collapsible sidebar.");this._initEventListeners(),this._initSidebarCounters(),this._initDesktop(),e.removeAttribute("data-bslib-sidebar-init");let t=e.querySelector(":scope > script[data-bslib-sidebar-init]");t&&e.removeChild(t)}get isClosed(){return this.layout.container.classList.contains(i.classes.COLLAPSE)}static getInstance(e){return i.instanceMap.get(e)}static initCollapsibleAll(){if(document.readyState==="loading"){i.onReadyScheduled||(i.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{i.initCollapsibleAll()}));return}let e=`.${i.classes.LAYOUT}[data-bslib-sidebar-init]`;if(!document.querySelector(e))return;document.querySelectorAll(e).forEach(n=>new i(n))}_initEventListeners(){var n;let{sidebar:e,toggle:t}=this.layout;t.addEventListener("click",r=>{r.preventDefault(),this.toggle("toggle")}),(n=t.querySelector(".collapse-icon"))==null||n.addEventListener("transitionend",()=>{this._finalizeState(),$(e).trigger("toggleCollapse.sidebarInputBinding")})}_initSidebarCounters(){let{container:e}=this.layout,t=`.${i.classes.LAYOUT}> .main > .${i.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function r(s){return s=s?s.parentElement:null,s&&s.classList.contains("main")&&(s=s.parentElement),s&&s.classList.contains(i.classes.LAYOUT)?s:null}let l=[e],d=r(e);for(;d;)l.unshift(d),d=r(d);let u={left:0,right:0};l.forEach(function(s,y){s.style.setProperty("--bslib-sidebar-counter",y.toString());let f=s.classList.contains("sidebar-right")?u.right++:u.left++;s.style.setProperty("--bslib-sidebar-overlap-counter",f.toString())})}_initDesktop(){var n;let{container:e}=this.layout;if(((n=e.dataset.bslibSidebarOpen)==null?void 0:n.trim())!=="desktop")return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&this.toggle("close")}toggle(e){typeof e=="undefined"&&(e="toggle");let{container:t,main:n,sidebar:r}=this.layout,l=this.isClosed;if(["open","close","toggle"].indexOf(e)===-1)throw new Error(`Unknown method ${e}`);e==="toggle"&&(e=l?"open":"close"),!(l&&e==="close"||!l&&e==="open")&&(g(n),e==="open"&&(r.hidden=!1),t.classList.add(i.classes.TRANSITIONING),t.classList.toggle(i.classes.COLLAPSE))}_finalizeState(){let{container:e,sidebar:t,toggle:n}=this.layout;e.classList.remove(i.classes.TRANSITIONING),t.hidden=this.isClosed,n.ariaExpanded=this.isClosed?"false":"true"}},o=i;o.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"},o.onReadyScheduled=!1,o.instanceMap=new WeakMap;var c=class extends p{find(e){return $(e).find(`.${o.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){let t=o.getInstance(e.parentElement);return t?t.isClosed:!1}setValue(e,t){let n=t?"open":"close";this.receiveMessage(e,{method:n})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(n){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){let n=o.getInstance(e.parentElement);n&&n.toggle(t.method)}};b(c,"sidebar");window.bslib=window.bslib||{};window.bslib.Sidebar=o;})();
//# sourceMappingURL=sidebar.min.js.map
